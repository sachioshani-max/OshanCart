<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | OshanCart</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f4f4; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .checkout-container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 400px; }
        h2 { color: #232f3e; text-align: center; margin-bottom: 20px; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 14px; }
        .order-btn { width: 100%; padding: 15px; background: #ff4d6d; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .order-btn:hover { background: #ff758c; }
        .item-info { background: #fff5f6; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; color: #333; border-left: 5px solid #ff4d6d; }
    </style>
</head>
<body>

<div class="checkout-container">
    <h2>Confirm Your Order üöö</h2>
    <div id="product-summary" class="item-info">Loading item details...</div>
    
    <form id="checkout-form">
        <input type="text" id="cust-name" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏ (Full Name)" required>
        <input type="text" id="cust-phone" placeholder="WhatsApp ‡∂Ö‡∂Ç‡∂ö‡∂∫ (WhatsApp Number)" required>
        <textarea id="cust-address" placeholder="‡∂∂‡∂©‡∑î ‡∂ë‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î ‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫ (Delivery Address)" rows="3" required></textarea>
        
        <input type="hidden" id="item-name">
        <input type="hidden" id="item-price">

        <button type="submit" class="order-btn" id="submit-btn">Place Order (Cash on Delivery)</button>
    </form>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDy430AP0t92QND_VdaoCkK0J23y2c5rkE",
        authDomain: "oshancart.firebaseapp.com",
        projectId: "oshancart",
        storageBucket: "oshancart.firebasestorage.app",
        messagingSenderId: "686982543488",
        appId: "1:686982543488:web:d74a83a3f53dbae3754e65"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // URL ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä Product ID ‡∂ë‡∂ö ‡∂ú‡∂±‡∑ä‡∂±‡∑Ä‡∑è
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');

    if (productId) {
        const docRef = doc(db, "products", productId);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
            const data = docSnap.data();
            document.getElementById('product-summary').innerHTML = `
                <b>Item:</b> ${data.name}<br>
                <b>Price:</b> Rs. ${data.price}<br>
                <b>Delivery:</b> ${data.delivery}
            `;
            document.getElementById('item-name').value = data.name;
            document.getElementById('item-price').value = data.price;
        }
    }

    // EmailJS Init (‡∂î‡∂∫‡∑è‡∂ú‡∑ö Public Key ‡∂ë‡∂ö ‡∂¥‡∑É‡∑î‡∑Ä ‡∂Ø‡∑è‡∂±‡∑ä‡∂± ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä)
    emailjs.init("YOUR_PUBLIC_KEY"); 

    document.getElementById('checkout-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const btn = document.getElementById('submit-btn');
        btn.innerText = "Processing...";
        btn.disabled = true;

        const templateParams = {
            from_name: document.getElementById('cust-name').value,
            phone: document.getElementById('cust-phone').value,
            address: document.getElementById('cust-address').value,
            item: document.getElementById('item-name').value,
            price: document.getElementById('item-price').value
        };

        // EmailJS ‡∑Ñ‡∂ª‡∑Ñ‡∑è Message ‡∂ë‡∂ö ‡∂∫‡∑ê‡∑Ä‡∑ì‡∂∏
        emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
            .then(() => {
                alert("‚ù§Ô∏è ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í! ‡∂î‡∂∂‡∑ö ‡∂á‡∂´‡∑Ä‡∑î‡∂∏ ‡∂Ö‡∂¥‡∂ß ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑è. ‡∂â‡∂ö‡∑ä‡∂∏‡∂±‡∑í‡∂±‡∑ä‡∂∏ ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±‡∂∏‡∑ä.");
                window.location.href = "success.html";
            }, (err) => {
                alert("Error: " + JSON.stringify(err));
                btn.disabled = false;
                btn.innerText = "Place Order";
            });
    });
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout | OshanCart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f7f8fa; margin: 0; padding: 20px; color: #333; }
        .checkout-container { max-width: 1000px; margin: auto; display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; }
        
        .section-card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        h2 { font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; color: #232f3e; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        /* Input Styles */
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 13px; font-weight: bold; margin-bottom: 5px; color: #666; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px; outline: none; transition: 0.3s; }
        input:focus { border-color: #febd69; box-shadow: 0 0 5px rgba(254, 189, 105, 0.5); }

        /* Payment Icons */
        .payment-methods { display: flex; gap: 10px; margin-bottom: 15px; }
        .payment-methods i { font-size: 30px; color: #555; }

        /* Order Summary */
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
        .total-row { border-top: 2px solid #eee; padding-top: 15px; margin-top: 15px; font-weight: bold; font-size: 18px; color: #ff4d6d; }

        .place-order-btn { width: 100%; background: #ffc800; border: 1px solid #a88734; padding: 15px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; margin-top: 20px; }
        .place-order-btn:hover { background: #f7ca00; }
        
        @media (max-width: 768px) { .checkout-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #232f3e; margin: 0;">OSHAN CART</h1>
        <p style="font-size: 13px; color: #00a65a;"><i class="fas fa-lock"></i> Secure SSL Encrypted Checkout</p>
    </div>

    <div class="checkout-container">
        
        <div>
            <div class="section-card">
                <h2><i class="fas fa-truck"></i> Shipping Address</h2>
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" placeholder="Sachin ...">
                </div>
                <div class="form-group">
                    <label>Street Address</label>
                    <input type="text" placeholder="House No, Street Name">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" placeholder="Colombo">
                    </div>
                    <div class="form-group">
                        <label>Postal Code</label>
                        <input type="text" placeholder="10100">
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h2><i class="fas fa-credit-card"></i> Payment Method</h2>
                <div class="payment-methods">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-paypal"></i>
                    <i class="fab fa-cc-apple-pay"></i>
                </div>
                <div class="form-group">
                    <label>Card Number</label>
                    <input type="text" placeholder="0000 0000 0000 0000">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>Expiry Date</label>
                        <input type="text" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label>CVV</label>
                        <input type="password" placeholder="***">
                    </div>
                </div>
            </div>
        </div>

        <div>
            <div class="section-card">
                <h2>Order Summary</h2>
                <div class="summary-row">
                    <span>Items (2):</span>
                    <span>Rs. 7,400.00</span>
                </div>
                <div class="summary-row">
                    <span>Shipping & handling:</span>
                    <span style="color: #00a65a;">FREE</span>
                </div>
                <div class="summary-row">
                    <span>Promotion (LOVE2026):</span>
                    <span style="color: #ff4d6d;">- Rs. 1,480.00</span>
                </div>
                
                <div class="summary-row total-row">
                    <span>Order Total:</span>
                    <span>Rs. 5,920.00</span>
                </div>

                <button class="place-order-btn" onclick="processOrder()">Place Your Order</button>
                <p style="font-size: 11px; color: #777; margin-top: 15px; text-align: center;">
                    By placing your order, you agree to OshanCart's <a href="#">privacy notice</a> and <a href="#">conditions of use</a>.
                </p>
            </div>
            
            <div style="text-align: center;">
                <a href="index.html" style="text-decoration: none; color: #0066c0; font-size: 14px;">‚Üê Back to Shopping</a>
            </div>
        </div>

    </div>

    <script>
        function processOrder() {
            const btn = document.querySelector('.place-order-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            btn.style.opacity = '0.7';
            btn.disabled = true;

            setTimeout(() => {
                alert("üéâ Success! Your order has been placed. Order ID: #OS-99234");
                window.location.href = "index.html";
            }, 3000);
        }
    </script>
</body>
                  </html>
