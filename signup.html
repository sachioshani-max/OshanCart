<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OshanCart Signup/Login</title>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* Body & Background */
body {
    margin:0;
    font-family: Arial, sans-serif;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background-size: cover;
    background-position: center;
    transition: background 0.3s ease;
}

/* Auth Card */
.auth-card {
    background: rgba(255, 165, 0, 0.95);
    padding: 30px;
    border-radius: 12px;
    width: 350px;
    text-align: center;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    z-index: 5;
    position: relative;
}

/* Buttons Container */
.auth-buttons {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
}

/* Buttons */
.auth-btn {
    padding: 12px 20px;
    border-radius: 8px;
    border: 2px solid transparent;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    color: #fff;
}

.google { background: rgba(219,68,55,0.8); }
.google:hover { background: rgba(219,68,55,1); border: 2px solid #fff; }

.facebook { background: rgba(66,103,178,0.8); }
.facebook:hover { background: rgba(66,103,178,1); border: 2px solid #fff; }

.email { background: rgba(255,255,255,0.2); color:#ff7f00; }
.email:hover { background: rgba(255,255,255,0.4); border: 2px solid #ff7f00; }

/* Offer Popup */
.popup {
    position: fixed;
    display: none;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
    z-index: 9999;
}
.popup-content {
    background:#fff;
    padding: 20px;
    border-radius: 12px;
    text-align:center;
    position: relative;
}
.close {
    position:absolute;
    top:10px; right:15px;
    font-size:24px;
    cursor:pointer;
}

/* Logo */
.logo { width:100px; margin-bottom:15px; }

/* Responsive */
@media(max-width:480px){
    .auth-card { width:90%; padding:20px; }
}
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
</head>
<body>

<!-- Offer Popup -->
<div id="offerPopup" class="popup">
  <div class="popup-content">
    <span id="closePopup" class="close">&times;</span>
    <img src="images/offer1.png" alt="50% OFF" style="width:80px; margin-bottom:10px;">
    <h2>SUPER SALE</h2>
    <p>Big offers today! Don't miss out!</p>
  </div>
</div>

<!-- Signup/Login Card -->
<div class="auth-card">
    <img src="images/logo.png" alt="OshanCart Logo" class="logo">
    <h1>Welcome to OshanCart</h1>
    
    <div class="auth-buttons">
        <button id="googleSignIn" class="auth-btn google">Sign-up / Login with Google</button>
        <button id="fbSignIn" class="auth-btn facebook">Sign-up / Login with Facebook</button>
        <button id="emailSignIn" class="auth-btn email">Sign-up / Login with Email</button>
    </div>
</div>

<script>
/* Firebase Config */
const firebaseConfig = {
    apiKey: "AIzaSyDy430AP0t92QND_VdaoCkK0J23y2c5rkE",
    authDomain: "oshancart.firebaseapp.com",
    projectId: "oshancart",
    storageBucket: "oshancart.appspot.com",
    messagingSenderId: "686982543488",
    appId: "1:686982543488:web:d74a83a3f53dbae3754e65"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

/* Offer Popup */
const popup = document.getElementById('offerPopup');
const closeBtn = document.getElementById('closePopup');

window.onload = () => {
    if(!localStorage.getItem('offerShown')){
        popup.style.display = 'flex';
        localStorage.setItem('offerShown','true');
    }
};
closeBtn.onclick = () => popup.style.display = 'none';

/* Firebase Auth */
// Google
document.getElementById('googleSignIn').addEventListener('click', () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
    .then(res => alert('Google Sign-In Success! Welcome '+ res.user.displayName))
    .catch(err => alert(err.message));
});
// Facebook
document.getElementById('fbSignIn').addEventListener('click', () => {
    const provider = new firebase.auth.FacebookAuthProvider();
    auth.signInWithPopup(provider)
    .then(res => alert('Facebook Sign-In Success! Welcome '+ res.user.displayName))
    .catch(err => alert(err.message));
});
// Email
document.getElementById('emailSignIn').addEventListener('click', () => {
    const email = prompt("Enter your email");
    const password = prompt("Enter your password");
    auth.createUserWithEmailAndPassword(email, password)
    .then(res => alert('Signup Success! Welcome '+ res.user.email))
    .catch(err => {
        if(err.code === 'auth/email-already-in-use'){
            auth.signInWithEmailAndPassword(email,password)
            .then(res => alert('Login Success! Welcome '+ res.user.email))
            .catch(e => alert(e.message));
        } else alert(err.message);
    });
});
</script>

</body>
</html>
