<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oshan Cart | Premium Global Shopping</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.2/css/flag-icons.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --daraz-orange: #f85606;
            --hover-bg: #fdf2ee;
            --white: #ffffff;
            --light-bg: #f4f4f4;
            --text-main: #212121;
        }

        body { font-family: 'Roboto', sans-serif; margin: 0; background-color: var(--light-bg); color: var(--text-main); overflow-x: hidden; }

        /* --- DESKTOP NAV --- */
        .desktop-nav { display: block; background: var(--white); position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .top-bar { background: #f7f7f7; padding: 5px 5%; display: flex; justify-content: flex-end; gap: 20px; font-size: 12px; border-bottom: 1px solid #eee; }
        .top-bar span, .top-bar a { cursor: pointer; text-decoration: none; color: #666; transition: 0.3s; }
        
        .main-nav { display: flex; align-items: center; padding: 12px 5%; gap: 30px; }
        .logo-section { display: flex; align-items: center; gap: 15px; cursor: pointer; min-width: 180px; }
        .logo-section h2 { color: var(--daraz-orange); margin: 0; font-family: 'Poppins', sans-serif; }

        .search-box { flex: 1; display: flex; background: #eff0f5; border-radius: 4px; overflow: hidden; height: 45px; }
        .search-box input { width: 100%; border: none; background: transparent; padding: 0 15px; outline: none; }
        .search-btn { background: var(--daraz-orange); color: white; border: none; padding: 0 25px; cursor: pointer; }

        .nav-icons { display: flex; gap: 25px; align-items: center; }
        .icon-item { text-align: center; color: #333; text-decoration: none; font-size: 11px; }

        /* --- MOBILE NAV --- */
        .mobile-nav { display: none; background: white; padding: 10px 15px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .mobile-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }

        /* --- SIDEBAR --- */
        .sidebar-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; backdrop-filter: blur(4px); }
        .oshancart-sidebar { position: fixed; top: 0; left: -320px; width: 300px; height: 100%; background: white; z-index: 2001; transition: 0.4s; overflow-y: auto; }
        .oshancart-sidebar.active { left: 0; }
        .side-header { background: linear-gradient(135deg, #f85606, #ff8400); padding: 30px 20px; color: white; }
        .side-section { border-bottom: 8px solid #f4f4f4; padding: 10px 0; }
        .side-item { display: flex; align-items: center; padding: 12px 20px; text-decoration: none; color: #333; font-size: 14px; }
        .side-item i { width: 30px; color: #666; }

        /* --- LAYOUT --- */
        .home-hero { display: flex; padding: 15px 5%; gap: 20px; }
        .category-sidebar { width: 260px; background: white; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .cat-item { padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; font-size: 13px; color: #444; text-decoration: none; border-bottom: 1px solid #f9f9f9; }
        .cat-item:hover { background: var(--hover-bg); color: var(--daraz-orange); }

        .product-container { padding: 20px 5%; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .product-card { background: white; border-radius: 8px; overflow: hidden; border: 1px solid transparent; transition: 0.3s; }
        .product-card:hover { border-color: var(--daraz-orange); transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .product-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; }
        .product-info { padding: 12px; }
        .p-price { color: var(--daraz-orange); font-weight: bold; font-size: 18px; margin: 5px 0; }

        /* --- CHAT WIDGET --- */
        #ai-chat-widget { position: fixed; bottom: 80px; right: 20px; z-index: 3000; }
        .chat-bubble { background: var(--daraz-orange); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .chat-window { display: none; width: 300px; height: 400px; background: white; position: absolute; bottom: 75px; right: 0; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.2); flex-direction: column; }

        /* --- BOTTOM NAV --- */
        .bottom-nav { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #eee; padding: 10px 0; justify-content: space-around; z-index: 1000; }
        .nav-link { text-decoration: none; color: #666; font-size: 11px; display: flex; flex-direction: column; align-items: center; }

        @media (max-width: 768px) {
            .desktop-nav, .category-sidebar { display: none !important; }
            .mobile-nav, .bottom-nav { display: block !important; }
            .bottom-nav { display: flex !important; }
            .home-hero { padding: 10px; }
            body { padding-bottom: 70px; }
        }
    </style>
</head>
<body>

    <div class="sidebar-overlay" id="sideOverlay" onclick="closeSidebar()"></div>
    <div class="oshancart-sidebar" id="oshancartSidebar">
        <div class="side-header">
            <div style="display:flex; align-items:center; gap:12px;">
                <i class="fas fa-user-circle" style="font-size: 45px;"></i>
                <div>
                    <div style="font-weight:600;">Welcome to Oshan</div>
                    <div style="font-size:12px; opacity:0.8;">Sign In / Register</div>
                </div>
            </div>
        </div>
        <div class="side-section">
            <a href="index.html" class="side-item"><i class="fas fa-home"></i> Home</a>
            <a href="orders.html" class="side-item"><i class="fas fa-box"></i> My Orders</a>
            <a href="wallet.html" class="side-item"><i class="fas fa-wallet"></i> Oshan Wallet</a>
        </div>
        <div class="side-section">
            <a href="become-seller.html" class="side-item" style="color:var(--daraz-orange); font-weight:bold;"><i class="fas fa-store"></i> Sell on Oshan</a>
        </div>
    </div>

    <header class="desktop-nav">
        <div class="top-bar">
            <span onclick="accessAdmin()">Admin Dashboard</span>
            <a href="help.html">Help Center</a>
        </div>
        <div class="main-nav">
            <div class="logo-section" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
                <h2>OshanCart</h2>
            </div>
            <div class="search-box">
                <input type="text" id="desktopSearch" placeholder="Search products...">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <div class="nav-icons">
                <a href="profile.html" class="icon-item"><i class="fas fa-user"></i><span>Account</span></a>
                <a href="cart.html" class="icon-item"><i class="fas fa-shopping-cart"></i><span>Cart</span></a>
            </div>
        </div>
    </header>

    <header class="mobile-nav">
        <div class="mobile-top">
            <i class="fas fa-bars" onclick="toggleSidebar()"></i>
            <h3 style="color:var(--daraz-orange); margin:0;">OshanCart</h3>
            <i class="fas fa-shopping-cart"></i>
        </div>
        <div class="search-box">
            <input type="text" placeholder="Search Oshan Cart...">
        </div>
    </header>

    <main class="home-hero">
        <aside class="category-sidebar">
            <div style="padding:15px; font-weight:bold; border-bottom:1px solid #eee;">CATEGORIES</div>
            <a href="#" class="cat-item">Womens Fashion ðŸ‘—</a>
            <a href="#" class="cat-item">Mens Fashion ðŸ‘•</a>
            <a href="#" class="cat-item">Electronics âš¡</a>
            <a href="#" class="cat-item">Ceylon Items ðŸ‡±ðŸ‡°</a>
        </aside>
        
        <div style="flex:1; border-radius:8px; overflow:hidden; height:350px;">
            <img src="https://ae01.alicdn.com/kf/S8f9038283307409292158866e40854d9I.jpg" style="width:100%; height:100%; object-fit:cover;">
        </div>
    </main>

    <section class="product-container">
        <h3>Just For You</h3>
        <div class="product-grid" id="mainProductGrid">
            </div>
    </section>

    <div id="ai-chat-widget">
        <div class="chat-window" id="chatWin">
            <div style="background:var(--daraz-orange); color:white; padding:15px; border-radius:12px 12px 0 0;">Oshan AI</div>
            <div id="chatBody" style="flex:1; padding:10px; overflow-y:auto;"></div>
            <div style="padding:10px; border-top:1px solid #eee; display:flex;">
                <input type="text" id="aiInput" style="flex:1; border:none; outline:none;">
                <button onclick="askAI()" style="border:none; background:none; color:var(--daraz-orange);"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <div class="chat-bubble" onclick="toggleChat()"><i class="fas fa-robot"></i></div>
    </div>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-link"><i class="fas fa-home"></i>Home</a>
        <a href="javascript:void(0)" onclick="toggleSidebar()" class="nav-link"><i class="fas fa-list"></i>Category</a>
        <a href="cart.html" class="nav-link"><i class="fas fa-shopping-cart"></i>Cart</a>
        <a href="profile.html" class="nav-link"><i class="fas fa-user"></i>Account</a>
    </nav>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDy430AP0t92QND_VdaoCkK0J23y2c5rkE",
            authDomain: "oshancart.firebaseapp.com",
            projectId: "oshancart",
            storageBucket: "oshancart.appspot.com",
            messagingSenderId: "686982543488",
            appId: "1:686982543488:web:d74a83a3f53dbae3754e65"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function toggleSidebar() {
            document.getElementById('sideOverlay').style.display = 'block';
            document.getElementById('oshancartSidebar').classList.add('active');
        }

        function closeSidebar() {
            document.getElementById('oshancartSidebar').classList.remove('active');
            setTimeout(() => { document.getElementById('sideOverlay').style.display = 'none'; }, 300);
        }

        function toggleChat() {
            const win = document.getElementById('chatWin');
            win.style.display = (win.style.display === 'none' || win.style.display === '') ? 'flex' : 'none';
        }

        function loadProducts() {
            const grid = document.getElementById('mainProductGrid');
            db.collection("products").onSnapshot((snapshot) => {
                grid.innerHTML = "";
                snapshot.forEach((doc) => {
                    const p = doc.data();
                    grid.innerHTML += `
                        <div class="product-card">
                            <img src="${p.image}" class="product-img">
                            <div class="product-info">
                                <div style="font-size:13px; height:34px; overflow:hidden;">${p.name}</div>
                                <div class="p-price">Rs. ${p.price}</div>
                                <button onclick="window.location.href='cart.html?id=${doc.id}'" style="width:100%; background:var(--daraz-orange); color:white; border:none; padding:8px; border-radius:4px;">Buy Now</button>
                            </div>
                        </div>`;
                });
            });
        }

        function accessAdmin() {
            const pw = prompt("Admin Password:");
            if(pw === "Lakshan@2001") window.location.href = "admin-dashboard.html";
        }

        window.onload = loadProducts;
    </script>
</body>
</html>
