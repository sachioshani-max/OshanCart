<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oshan Cart | Global Shopping Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css"> </head>
<body>

    <div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-user-circle"></i> Hello, Sign In
        </div>
        <a href="index.html"><i class="fas fa-home"></i> Home</a>
        <a href="login.html"><i class="fas fa-sign-in-alt"></i> Sign In / Register</a>
        <a href="profile.html"><i class="fas fa-user-edit"></i> Edit Profile</a>
        <a href="affiliate.html"><i class="fas fa-handshake"></i> Affiliate Program</a>
        <a href="orders.html"><i class="fas fa-box"></i> My Orders</a>
        <hr>
        <div class="admin-access" style="padding: 10px 20px;">
            <a href="javascript:void(0)" onclick="checkAdminPassword()" class="admin-link">ðŸ”‘ Admin Panel</a>
        </div>
    </div>

    <div class="promo-banner">ðŸš€ OSHAN CART GRAND OPENING! - Get 20% OFF using code: LOVE2026</div>
 
    <header>
        <header>
    <div class="header-left">
        <i class="fas fa-bars menu-toggle" onclick="toggleSidebar()"></i>
        <a href="index.html" class="logo">OSHAN CART</a>
    </div>

    <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
        <button class="search-btn"><i class="fas fa-search"></i></button>
    </div>

    <div class="oshan-flag-dropdown">
        <div class="flag-trigger" onclick="toggleFlagMenu(event)">
            <img id="current-flag" src="https://flagcdn.com/w40/sl.png" width="25">
            <span class="arrow-down">â–¼</span>
        </div>
        <div class="flag-menu" id="flagMenu">
            <div class="flag-item" onclick="changeLang('si', 'sl')"><img src="https://flagcdn.com/w20/sl.png"> ðŸ‡±ðŸ‡° SL (+94)</div>
            <div class="flag-item" onclick="changeLang('en', 'us')"><img src="https://flagcdn.com/w20/us.png"> ðŸ‡ºðŸ‡¸ US (+1)</div>
        </div>
    </div>
        </header>
        
        <div style="display: flex; align-items: center;">
            <i class="fas fa-bars menu-toggle" onclick="toggleSidebar()"></i>
            <a href="index.html" class="logo">OSHAN CART</a>
        </div>

        <div class="search-wrapper">
            <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
            <button class="mic-btn" id="micBtn" onclick="startVoiceSearch()"><i class="fas fa-microphone"></i></button>
            <button class="search-btn"><i class="fas fa-search"></i></button>
        </div>

        <div class="oshan-flag-dropdown">
            <div class="flag-trigger" onclick="toggleFlagMenu(event)">
                <img id="current-flag" src="https://flagcdn.com/w40/sl.png" width="25">
                <span style="font-size: 10px; margin-left: 5px;">â–¼</span>
            </div>
            <div class="flag-menu" id="flagMenu">
                <div class="flag-item" onclick="changeLang('si', 'sl')"><img src="https://flagcdn.com/w20/sl.png"> ðŸ‡±ðŸ‡° SL (+94)</div>
                <div class="flag-item" onclick="changeLang('hi', 'in')"><img src="https://flagcdn.com/w20/in.png"> ðŸ‡®ðŸ‡³ IN (+91)</div>
                <div class="flag-item" onclick="changeLang('ja', 'jp')"><img src="https://flagcdn.com/w20/jp.png"> ðŸ‡¯ðŸ‡µ JP (+81)</div>
                <div class="flag-item" onclick="changeLang('ko', 'kr')"><img src="https://flagcdn.com/w20/kr.png"> ðŸ‡°ðŸ‡· KR (+82)</div>
                <div class="flag-item" onclick="changeLang('en', 'us')"><img src="https://flagcdn.com/w20/us.png"> ðŸ‡ºðŸ‡¸ US (+1)</div>
                <div class="flag-item" onclick="changeLang('en', 'gb')"><img src="https://flagcdn.com/w20/gb.png"> ðŸ‡¬ðŸ‡§ UK (+44)</div>
                <div class="flag-item" onclick="changeLang('ar', 'ae')"><img src="https://flagcdn.com/w20/ae.png"> ðŸ‡¦ðŸ‡ª AE (+971)</div>
                <div class="flag-item" onclick="changeLang('fr', 'fr')"><img src="https://flagcdn.com/w20/fr.png"> ðŸ‡«ðŸ‡· FR (+33)</div>
            </div>
        </div>

        <div id="google_translate_element" style="display:none;"></div>
    </header>

    <div class="product-grid" id="product-container"></div>

    <div id="ai-chat-container">
        <div id="ai-window">
            <div class="ai-header">ðŸ¤– Oshan AI Assistant</div>
            <div id="ai-messages"></div>
            <div class="ai-input-area">
                <input type="text" id="ai-msg-input" placeholder="Ask me anything...">
                <button onclick="askOshanAI()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <button class="ai-toggle-btn" onclick="toggleAIChat()"><i class="fas fa-robot"></i></button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDy430AP0t92QND_VdaoCkK0J23y2c5rkE",
            authDomain: "oshancart.firebaseapp.com",
            projectId: "oshancart",
            storageBucket: "oshancart.firebasestorage.app",
            messagingSenderId: "686982543488",
            appId: "1:686982543488:web:d74a83a3f53dbae3754e65"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const container = document.getElementById('product-container');
        onSnapshot(query(collection(db, "products"), orderBy("createdAt", "desc")), (snap) => {
            container.innerHTML = "";
            snap.forEach(doc => {
                const item = doc.data();
                container.innerHTML += `
                    <div class="product-card">
                        <img src="${item.image}" style="width:100%; height:180px; object-fit:cover; border-radius:8px;">
                        <h4>${item.name}</h4>
                        <div class="price">Rs. ${parseFloat(item.price).toLocaleString()}</div>
                        <button class="buy-btn" onclick="window.location.href='checkout.html?id=${doc.id}'">Buy Now</button>
                    </div>`;
            });
        });
    </script>

    <script>
        function checkAdminPassword() {
            const pw = prompt("Enter Admin Password:");
            if (pw === "admin123") {
                window.location.href = "admin.html";
            } else if (pw !== null) {
                alert("Wrong password!");
            }
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        function toggleFlagMenu(e) {
            e.stopPropagation();
            document.getElementById("flagMenu").classList.toggle("show");
        }

        function changeLang(lang, flag) {
            document.getElementById("current-flag").src = `https://flagcdn.com/w40/${flag}.png`;
            let select = document.querySelector("select.goog-te-combo");
            if (select) { select.value = lang; select.dispatchEvent(new Event('change')); }
        }

        function toggleAIChat() {
            const win = document.getElementById('ai-window');
            win.style.display = (win.style.display === 'none' || win.style.display === '') ? 'flex' : 'none';
        }

        function askOshanAI() {
            const input = document.getElementById('ai-msg-input');
            const box = document.getElementById('ai-messages');
            if (!input.value.trim()) return;
            box.innerHTML += `<div style="text-align:right; margin:5px; color:#ff4d6d;"><b>You:</b> ${input.value}</div>`;
            setTimeout(() => {
                box.innerHTML += `<div style="text-align:left; margin:5px; color:#232f3e;"><b>AI:</b> Processing your request...</div>`;
                box.scrollTop = box.scrollHeight;
            }, 500);
            input.value = "";
        }

        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
        }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
